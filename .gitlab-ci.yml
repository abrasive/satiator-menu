build:
    variables:
        GIT_SUBMODULE_STRATEGY: recursive
    tags:
        - c2-maker
    script:
        - "rm -rf iapetus-build newlib-build"
        - "make clean"
        - "make VERSION=$CI_PIPELINE_ID"
        - "cd out; NUM=$(printf %06d ${CI_PIPELINE_ID}); zip satiator_menu${NUM}.zip menu.bin; mv satiator_menu${NUM}.zip .."
    artifacts:
        expire_in: 100 years
        paths:
            - out/menu.bin
            - out/menu.map
            - out/menu.elf
            - satiator_menu*.zip
